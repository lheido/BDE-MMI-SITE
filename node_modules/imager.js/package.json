{
  "name": "imager.js",
  "version": "0.3.0",
  "description": "Imager.js is an alternative solution to the issue of how to handle responsive image loading, created by developers at BBC News.",
  "main": "Imager.js",
  "scripts": {
    "test": "npm run test-pre && ./node_modules/karma/bin/karma start",
    "test-pre": "jshint Imager.js",
    "test-watch": "./node_modules/karma/bin/karma start --auto-watch",
    "build": "uglifyjs ./Imager.js -c -m -o ./Imager.min.js --source-map ./Imager.map.js && mv -f Imager.{map,min}.js ./dist",
    "release": "for TASK in (test-pre test-local build changelog changelog-post tag-and-publish); do npm run $TASK; done",
    "changelog": "github-changes -o BBC-News -r Imager.js -n ${npm_package_version} -a --use-commit-body --only-merges",
    "changelog-post": "git add CHANGELOG.md && git commit -m 'Updated CHANGELOG'",
    "tag-and-publish": "git tag ${npm_package_version} && git push --tags && npm publish"
  },
  "repository": {
    "type": "git",
    "url": "git://github.com/BBC-News/Imager.js.git"
  },
  "keywords": [
    "responsive",
    "srcset",
    "images",
    "resize",
    "polyfill",
    "shim",
    "img",
    "PictureFill"
  ],
  "license": "Apache-2.0",
  "devDependencies": {
    "components-jquery": "git://github.com/components/jquery.git#1.10.2",
    "expect.js": "~0.2.0",
    "github-changes": "0.0.10",
    "jshint": "~2.4.3",
    "karma": "~0.12.23",
    "karma-browserstack-launcher": "~0.1.1",
    "karma-chrome-launcher": "~0.1.0",
    "karma-expect": "~1.0.0",
    "karma-firefox-launcher": "~0.1.3",
    "karma-html2js-preprocessor": "~0.1.0",
    "karma-ievms": "0.0.4",
    "karma-mocha": "~0.1.9",
    "karma-phantomjs-launcher": "~0.1.4",
    "karma-sauce-launcher": "~0.2.10",
    "karma-sinon": "~1.0.3",
    "mocha": "~1.17.1",
    "sinon": "~1.8.1",
    "uglify-js": "~2.4.3"
  },
  "contributors": [
    {
      "name": "Mark McDonnell",
      "email": "mark.mcdonnell@bbc.co.uk",
      "url": "http://www.integralist.co.uk/"
    },
    {
      "name": "Addy Osmani",
      "email": "addyo@google.com",
      "url": "http://addyosmani.com/"
    },
    {
      "name": "Tom Maslen",
      "email": "tom.maslen@bbc.co.uk",
      "url": "http://tmaslen.com/"
    },
    {
      "name": "Thomas Parisot",
      "email": "thomas.parisot@bbc.co.uk",
      "url": "https://oncletom.io/"
    }
  ],
  "readme": "# Imager.js [![Build Status](https://secure.travis-ci.org/BBC-News/Imager.js.png?branch=master)](http://travis-ci.org/BBC-News/Imager.js)\n\n> Imager.js is an alternative solution to the issue of how to handle responsive image loading, created by developers at [BBC News](http://responsivenews.co.uk/).\n\n\n## Why?\n\nThere are many responsive image solutions in the wild: `srcset`, `src-n`, `PictureFill` and so on. They are either\n**verbose** or **hard to debug** (and to maintain/integrate). Some of them don't deal well with *pixel density*\nand suffer from **double asset payload** (meaning you end up downloading assets unnecessarily).\n\nWe wanted something **simple**, which **works** and which is **fast** as well as network friendly (only download what you need, when you need it).\n\nImager implements the  [BBC Responsive News technique](http://responsivenews.co.uk/post/50092458307/images) which incorporates:\n\n- loading any image once\n- loading the most suitable sized image\n\n## How does it work?\n\nImager runs through the following workflow:\n\n1. lookup **placeholder elements**\n2. replace **placeholders** with transparent images\n3. update `src` attribute for each image and assign the best quality/size ratio URL\n\nFinally, it will lazy load images to speed up page load time even further.\n\n## Compatibility\n\nImager is tested against those various browsers:\n\n- Chrome stable\n- Firefox stable\n- Internet Explorer 8\n- Safari 6+\n- Mobile Safari 5.1\n- Android 4.0 Stock Browser\n\n\n## Install\n\n<table>\n  <thead>\n    <tr>\n      <th>npm</th>\n      <th>bower</th>\n      <th>old school</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td><code>npm install --save imager.js</code></td>\n      <td><code>bower install --save imager.js</code></td>\n      <td><a href=\"https://github.com/BBC-News/Imager.js/archive/master.zip\">download zip file</a></td>\n    </tr>\n  </tbody>\n</table>\n\n## Using\n\n```html\n<div style=\"width: 240px\">\n    <div class=\"delayed-image-load\" data-src=\"http://placehold.it/{width}\" data-alt=\"alternative text\"></div>\n</div>\n\n<script>\n    new Imager({ availableWidths: [200, 260, 320, 600] });\n</script>\n```\n\nThis will result in the following HTML output:\n\n```html\n<div style=\"width: 240px\">\n    <img src=\"http://placehold.it/260\" data-src=\"http://placehold.it/{width}\" alt=\"alternative text\" class=\"image-replace\">\n</div>\n\n<script>\n    new Imager({ availableWidths: [200, 260, 320, 600] });\n</script>\n```\n\n`260` has been elected as the best available width (as it is the closest upper size relative to `240` pixels).\n\n### Pixel Ratio / HiDPI / Retina\n\nLet's say we have generated 4 sizes of images (`200`, `260`, `320` and `600`)\nin 3 different pixel ratio flavours (`1`, `1.3` and `2`):\n\n```html\n<div style=\"width: 240px\">\n    <div class=\"delayed-image-load\" data-src=\"http://example.com/assets/{width}/imgr{pixel_ratio}.png\" data-alt=\"alternative text\"></div>\n</div>\n\n<script>\n    new Imager({ availableWidths: [200, 260, 320, 600], availablePixelRatios: [1, 1.3, 2] });\n</script>\n```\n\nThe `img[src]` will be computed as following (according to the reported `window.devicePixelRatio` value by the device):\n\n- `http://example.com/assets/260/imgr.png` if no pixel ratio is detected, or advertised as `1`\n- `http://example.com/assets/260/imgr-2x.png` if pixel ratio is advertised as `2` (or any value greater than 2)\n- `http://example.com/assets/260/imgr-1.3x.png` if pixel ratio is advertised as `1.3`\n\nHead to this [device pixel density test](http://bjango.com/articles/min-device-pixel-ratio/) resource to learn more about the available pixel ratio for your device.\n\n### Interpolating `{width}` value\n\nImager has the ability to replace `{width}` with a non-numeric value if you\nprovide the `widthInterpolator` option, which is a function that returns the\nstring to be injected into the image URL for a given width. This feature allows you to use a human readable name or integrate with third-party image providers.\n\n```html\n<div style=\"width: 240px\">\n    <div class=\"delayed-image-load\" data-src=\"http://example.com/assets/imgr-{width}.png\" data-alt=\"alternative text\"></div>\n</div>\n\n<script>\n    new Imager({\n        availableWidths: [200, 260, 320, 600],\n        widthInterpolator: function(width) {\n          return width + 'x' + (width/2);\n        }\n    });\n</script>\n```\n\nThe `img[src]` will be computed as `http://example.com/assets/imgr-260x130.png` instead of `http://example.com/assets/imgr-260.png`.\n\nAlternatively you can define `availableWidths` as an `Object` where the key is the width, and the value is the string to be injected into the image URL.\n\n```html\n<div style=\"width: 240px\">\n    <div class=\"delayed-image-load\" data-src=\"http://example.com/assets/imgr-{width}.png\" data-alt=\"alternative text\"></div>\n</div>\n\n<script>\n    new Imager({\n        availableWidths: {\n            200: 'square',\n            260: 'small',\n            320: 'medium',\n            600: 'large'\n        }\n    });\n</script>\n```\n\nThe `img[src]` will be computed as `http://example.com/assets/imgr-small.png` instead of `http://example.com/assets/imgr-260.png`.\n\n### Mixing various configurations\n\nYou might want to generate HiDPI responsive images. But what if you also include images from another provider which\nserves a totally different set of sizes, without pixel ratio?\n\nHere is an example to serve your own images alongside [Flickr images](http://www.flickr.com/).\n\n```html\n<div style=\"width: 240px\">\n    <div class=\"delayed-image-load\"        data-src=\"http://placehold.it/{width}\" data-alt=\"alternative text 1\"></div>\n    <div class=\"delayed-flickr-image-load\" data-src=\"//farm5.staticflickr.com/4148/4990539658_a38ed4ec6e_{width}.jpg\" data-alt=\"alternative text 2\"></div>\n</div>\n\n<script>\n    var imgrPlaceholder = new Imager('.delayed-image-load', {\n        availableWidths: [200, 260, 320, 600]\n    });\n\n    var imgrFlickr = new Imager('.delayed-flickr-image-load', {\n        availableWidths: {\n            150: 't_d',\n            500: 'd',\n            640: 'z_d'\n        }\n    });\n</script>\n```\n\nThis will result in the following HTML output:\n\n```html\n<div style=\"width: 240px\">\n    <img src=\"http://placehold.it/260\" data-src=\"http://placehold.it/{width}\" alt=\"alternative text 1\" class=\"image-replace\">\n    <img src=\"//farm5.staticflickr.com/4148/4990539658_a38ed4ec6e_d.jpg\" data-src=\"//farm5.staticflickr.com/4148/4990539658_a38ed4ec6e_{width}.jpg\" alt=\"alternative text 2\" class=\"image-replace\">\n</div>\n```\n\n---\n\n# Documentation\n\n## HTML Attributes\n\nThe *HTML API* helps you control how Imager works from the *content point of view*.\n\n### `data-src`\n\nAvailable placeholders are:\n\n- `{width}`: best available image width (numeric value)\n- `{pixel_ratio}`: device pixel ratio (either *blank* or `-1.3x`, `-2x`, `-3x` etc.)\n\n\nSo the following HTML...\n\n```html\n<div data-src=\"http://placehold.it/{width}\"></div>\n```\n\n...is converted to...\n\n```html\n<img src=\"http://placehold.it/260\" data-src=\"http://placehold.it/{width}\" class=\"image-replace\">\n```\n\n### `data-width`\n\n`data-width` is the enforced size of the image placeholder; where the actual image will eventually be loaded.\n\nThis can be especially useful if you don't want to depend on the image container width.\n\nSo the following HTML...\n\n```html\n<div style=\"width:600px\">\n    <div data-src=\"http://placehold.it/{width}\" data-width=\"300\" data-alt=\"alternative text\"></div>\n</div>\n```\n\n...is converted to...\n\n```html\n<div style=\"width:600px\">\n    <img src=\"http://placehold.it/300\" data-src=\"http://placehold.it/{width}\" width=\"300\" alt=\"alternative text\" class=\"image-replace\">\n</div>\n```\n\n### `data-alt` and `data-class`\n\nThese two `data-*` attributes are copied from the responsive placeholder to the response `img` element.nnot process images or who have image loading disabled. It is converted to the `alt` attribute of the `img element.\n\nSo the following HTML...\n\n```html\n<div data-src=\"http://placehold.it/{width}\" data-alt=\"alternative text\"></div>\n<div data-src=\"http://placehold.it/{width}\" data-class=\"london calling\"></div>\n```\n\n...is converted to...\n\n```html\n<img src=\"http://placehold.it/260\" data-src=\"http://placehold.it/{width}\" alt=\"alternative text\" class=\"image-replace\">\n<img src=\"http://placehold.it/260\" data-src=\"http://placehold.it/{width}\" alt=\"\" class=\"london calling image-replace\">\n```\n\n## JavaScript Configuration\n\nYou can create one or several concurrent configurations of Imager within the same page. Its configuration options are\ndescribed below.\n\n[Advanced JavaScript API documentation lies in the `docs/` folder](docs/js-api.md).\n\n### `availableWidths`\n\nThis option is intended to reflect the available widths of each responsive image. These values will be used as replacements\nfor the `{width}` variable in `data-src` placeholders.\n\nThe following examples demonstrate the results of passing through different object types for the `availableWidths` option...\n\n`Array`: the widths are represented as numeric values\n\n```js\nnew Imager({\n    availableWidths: [240, 320, 640]\n});\n```\n\n`Object`: the widths associate a string value for their numeric counterpart\n\n```js\nnew Imager({\n    availableWidths: {\n        240: 'small',\n        320: 'medium',\n        640: 'large'\n    }\n});\n```\n\n`Function`: must return a value for the provided width argument\n\n```js\n// will return a double sized image width as a numeric value\nnew Imager({\n    availableWidths: function (image) {\n        return image.clientWidth * 2;\n    }\n});\n```\n\n### `availablePixelRatios`\n\nAn Array which indicates what are the available pixel ratios available for your responsive images.\n\nThese values will be used as replacements for the `{pixel_ratio}` variable in `data-src` placeholders.\n\n```js\nnew Imager({ availablePixelRatios: [1, 2] });\n```\n\n**Default value**: `[1, 2]`\n\n### `className`\n\nA String which indicates what the `className` value will be added on the newly created responsive image.\n\n```js\nnew Imager({ className: 'image-replace' });\n```\n\n**Default value**: `image-replace`\n\n### `scrollDelay`\n\nAn Integer value (in milliseconds) to indicate when Imager will check if a scroll has ended. If a scroll has stopped after this delay and the `lazyload` option is `true`, Imager will update the `src` attribute of the relevant images.\n\n**Default value**: `250`\n\n```js\nnew Imager({ scrollDelay: 250 });\n```\n\n**Notice**: set the `scrollDelay` value to `0` at your own risk; unless you know what you're doing, setting the value to zero will make the user experience totally janky! (and that would be an odd thing to do as you have chosen to use Imager to improve the user experience)\n\n### `onResize`\n\nA Boolean value. If set to `true`, Imager will update the `src` attribute of the relevant images.\n\n**Default value**: `true`\n\n```js\nnew Imager({ onResize: true });\n```\n\n### `lazyload`\n\nAn *experimental* Boolean value. If set to `true`, Imager will update the `src` attribute only of visible (and nearly visible) images.\n\n**Default value**: `false`\n\n```js\nnew Imager({ lazyload: true });\n```\n\n### `onImagesReplaced`\n\nA callback `Function`. Runs after Imager updates the `src` attribute of all relevant images.\n\nIts first and unique argument is an `Array` of `HTMLImageElement`, the ones processed by Imager.\n\n```js\nnew Imager({\n    onImagesReplaced: function(images) {\n        console.log('the src of all relevant images has been updated');\n    }\n});\n```\n\n# Demos\n\nAdditional and fully working examples lie in the [`demos` folder](demos/).\n\n\n# They are using it\n\n- [BBC News](http://m.bbc.co.uk/news)\n- [The Guardian](http://www.theguardian.com/)\n- [`x-imager` Web Component](https://github.com/addyosmani/x-imager)\n\n# Background\n\nThis is an experiment in offering developers an interim solution to responsive images based on the [ImageEnhancer](https://gist.github.com/Integralist/6157139) concept researched and developed by the team at BBC News.\n\nAt present, support for `srcset` and `PictureFill` are not widespread and the polyfills for these solutions also come with a number of drawbacks.\n\n[Mark McDonnell (@integralist)](http://twitter.com/Integralist) documented the process and rewrote the original code so it could be evolved and improved with the help of the open-source community.\n\nThe goal of this project is to automate the process with the help of the [Grunt](http://gruntjs.com/) JavaScript task runner (potentially via `grunt-responsive-images` for image generation based on a source directory).\n\nMuch of this work can be repurposed to work with a more standards-based approach once support improves in modern browsers.\n\nFor the purposes of maintaining a distinguishment between the ImageEnhancer concept built by BBC News and this project, we're calling it **Imager.js**\n\n\n# Credits\n\n- [Mark McDonnell](http://twitter.com/integralist)\n- [Tom Maslen](http://twitter.com/tmaslen)\n- [Thomas Parisot](https://twitter.com/oncletom)\n- [Addy Osmani](http://twitter.com/addyosmani)\n\n\n# Licence\n\n> Copyright 2014 British Broadcasting Corporation\n>\n> Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at\n>\n> http://www.apache.org/licenses/LICENSE-2.0\n>\n> Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/BBC-News/Imager.js/issues"
  },
  "_id": "imager.js@0.3.0",
  "dist": {
    "shasum": "0b27a5bda683f7986a1d1bac9e02a0cd7660ffac"
  },
  "_from": "imager.js@",
  "_resolved": "https://registry.npmjs.org/imager.js/-/imager.js-0.3.0.tgz"
}
